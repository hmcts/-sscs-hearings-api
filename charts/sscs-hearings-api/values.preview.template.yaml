java:
  image: ${IMAGE_NAME}
  ingressHost: ${SERVICE_FQDN}
  readinessDelay: 45
  environment:
    IDAM_S2S_AUTH: "http://rpe-service-auth-provider-aat.service.core-compute-aat.internal"
    CASEWORKER_REF_API_URL: "http://rd-caseworker-ref-api-aat.service.core-compute-aat.internal"
    CORE_CASE_DATA_API_URL: "http://ccd-data-store-api-aat.service.core-compute-aat.internal"
    JUDICIAL_REF_API_URL: "http://rd-judicial-api-aat.service.core-compute-aat.internal"
    IDAM_API_URL: https://idam-api.aat.platform.hmcts.net
    COMMON_REF_API_URL: "http://rd-commondata-api-aat.service.core-compute-aat.internal"
    HMC_HEARINGS_LISTENING_ENABLED: true
    AMQP_CONNECTION_STRING: "amqps://%1s?amqp.idleTimeout=%2d"
    HMC_HEARINGS_TOPIC_NAMESPACE: "sscs-servicebus-{{ .Values.global.environment }}"
    HMC_HEARINGS_TOPIC_CONNECTION_POSTFIX: ".servicebus.windows.net"
    HMC_HEARINGS_TOPIC_NAME: "stub-hmc-to-cft-{{ .Values.global.environment }}"
    HMC_HEARINGS_TOPIC_SUBSCRIPTION_NAME: "stub-to-sscs-subscription-{{ .Values.global.environment }}"
    HMC_HEARINGS_TOPIC_ACCESS_KEY: ""
    HMC_HEARINGS_TOPIC_POLICY_NAME: SendAndListenSharedAccessKey
  extraEnvs:
    - name: 'RABBITMQ_PASSWORD'
      valueFrom:
        secretKeyRef:
          name: ${SERVICE_NAME}-rabbitmq
          key: rabbitmq-password

rabbitmq:
  enabled: true
  image:
    debug: true
  extraPlugins: "rabbitmq_jms_topic_exchange rabbitmq_amqp1_0"
  extraConfiguration: |-
    default_vhost = default-vhost
    default_permissions.configure = .*
    default_permissions.read = .*
    default_permissions.write = .*
    amqp1_0.default_vhost = /
    amqp1_0.protocol_strict_mode = false
  auth:
    tls:
      enabled: true
      autoGenerated: true
      failIfNoPeerCert: false
